# This file was auto-generated by corerl@0.139.1
# at 2025-04-16T21:21:07.928911+00:00
# Do not make direct changes to the file.
pipeline:
  tags:
  - name: COAG_AI_DOSE_SP
    connection_id: fa3e1022-aaa5-46ac-ad11-9330ec7a6393
    node_identifier: ns=1;s=[main-veolia]AI_DOSE_SP
    is_endogenous: true
    type: ai_setpoint
    operating_range:
    - 0.0
    - 5.0
    action_bounds:
    - '{Dose_AL_SP_F_SP}-{COAG_AI_DOSE_EXCD_ALM_SP}'
    - '{Dose_AL_SP_F_SP}+{COAG_AI_DOSE_EXCD_ALM_SP}'
    red_bounds:
    - null
    - null
    yellow_bounds:
    - null
    - null
    change_bounds: null
    guardrail_schedule: null
    agg: last
    outlier:
      name: identity
    imputer:
      name: identity
    preprocess:
    - name: normalize
      min: 0.0
      max: 5.0
      from_data: false
    reward_constructor:
    - name: 'null'
    state_constructor: null
    filter: null
    value: null
  - name: COAG_AI_UVT_SP
    connection_id: fa3e1022-aaa5-46ac-ad11-9330ec7a6393
    node_identifier: ns=1;s=[main-veolia]UVT_TARGET_SP_F.OUT
    is_endogenous: true
    type: default
    operating_range:
    - 0.0
    - 100.0
    action_bounds: null
    red_bounds:
    - null
    - null
    yellow_bounds:
    - null
    - null
    change_bounds: null
    guardrail_schedule: null
    agg: avg
    outlier:
      name: identity
    imputer:
      name: identity
    preprocess:
    - name: normalize
      min: 0.0
      max: 100.0
      from_data: false
    reward_constructor:
    - name: 'null'
    state_constructor:
    - name: multi_trace
      trace_values:
      - 0.0
      - 0.9
    filter: null
    value: null
  - name: UV03_UV254_PV
    connection_id: fa3e1022-aaa5-46ac-ad11-9330ec7a6393
    node_identifier: ns=1;s=[main-isl]UV03_UV254.IN
    is_endogenous: true
    type: default
    operating_range:
    - 0.0
    - 100.0
    action_bounds: null
    red_bounds:
    - null
    - null
    yellow_bounds:
    - null
    - null
    change_bounds: null
    guardrail_schedule: null
    agg: avg
    outlier:
      name: identity
    imputer:
      name: identity
    preprocess:
    - name: normalize
      min: 0.0
      max: 100.0
      from_data: false
    reward_constructor:
    - name: 'null'
    state_constructor:
    - name: multi_trace
      trace_values:
      - 0.0
      - 0.9
    filter: null
    value: null
  - name: Dose_AL_SP_F_SP
    connection_id: fa3e1022-aaa5-46ac-ad11-9330ec7a6393
    node_identifier: ns=1;s=[main-veolia]Dose_AL_SP_F.OUT
    is_endogenous: true
    type: default
    operating_range:
    - 0.0
    - 5.0
    action_bounds: null
    red_bounds:
    - null
    - null
    yellow_bounds:
    - null
    - null
    change_bounds: null
    guardrail_schedule: null
    agg: avg
    outlier:
      name: identity
    imputer:
      name: identity
    preprocess:
    - name: normalize
      min: 0.0
      max: 5.0
      from_data: false
    reward_constructor:
    - name: 'null'
    state_constructor:
    - name: multi_trace
      trace_values:
      - 0.0
      - 0.9
    filter: null
    value: null
  - name: COAG_AI_DOSE_EXCD_ALM_SP
    connection_id: fa3e1022-aaa5-46ac-ad11-9330ec7a6393
    node_identifier: ns=1;s=[main-veolia]AI_DOSE_EXCD_SP_F.OUT
    is_endogenous: true
    type: default
    operating_range:
    - 0.0
    - 5.0
    action_bounds: null
    red_bounds:
    - null
    - null
    yellow_bounds:
    - null
    - null
    change_bounds: null
    guardrail_schedule: null
    agg: avg
    outlier:
      name: identity
    imputer:
      name: identity
    preprocess:
    - name: normalize
      min: 0.0
      max: 5.0
      from_data: false
    reward_constructor:
    - name: 'null'
    state_constructor:
    - name: multi_trace
      trace_values:
      - 0.0
      - 0.9
    filter: null
    value: null
  max_data_gap: PT30M
  imputer:
    name: per-tag
    default:
      name: identity
  oddity_filter:
    default:
      name: identity
  state_constructor:
    defaults:
    - name: multi_trace
      trace_values:
      - 0.0
      - 0.75
      - 0.9
      - 0.95
    countdown:
      kind: no_countdown
      normalize: true
      action_period: PT2H
      obs_period: PT15M
    seasonal:
      time_of_day_enabled: false
      day_of_week_enabled: false
      time_of_year_enabled: false
  transition_creator:
    name: all-the-time
    min_n_step: 1
    max_n_step: 8
    gamma: 0.9
  transition_filter:
    filters:
    - no_nan
  reward:
    priorities:
    - op: up_to
      tag: UV03_UV254_PV
      thresh: '{COAG_AI_UVT_SP}'
    - tags:
      - COAG_AI_DOSE_SP
      directions:
      - min
      weights:
      - 1.0
infra:
  db:
    drivername: postgresql+psycopg2
    username: postgres
    password: password
    ip: timescaledb
    port: 5432
    db_name: postgres
    schema: public
event_bus:
  enabled: false
  cli_connection: tcp://localhost:5555
  app_connection: inproc://corerl_app
experiment:
  debug: false
  device: cpu
  num_threads: 4
  exp_name: coag
  gamma: 0.9
  max_steps: 200
  offline_steps: 0
  offline_eval_iters: []
  offline_start_time: null
  offline_end_time: null
  pipeline_batch_duration: P7D
  render: 0
  param: ''
  param_from_hash: false
  save_path: output
  seed: 0
  is_simulation: false
feature_flags:
  delta_actions: false
  ensemble: 1
  zone_violations: false
  action_embedding: true
  wide_nets: true
  action_bounds: true
log_path: null
evals:
  drivername: postgresql+psycopg2
  username: postgres
  password: password
  ip: timescaledb
  port: 5432
  db_name: postgres
  table_name: evals_main
  enabled: true
  table_schema: public
  lo_wm: 10
metrics:
  drivername: postgresql+psycopg2
  username: postgres
  password: password
  ip: timescaledb
  port: 5432
  db_name: postgres
  table_name: metrics_main
  enabled: true
  table_schema: public
  lo_wm: 1
env:
  name: dep_async_env
  coreio_origin: http://coreio:2222
  db:
    drivername: postgresql+psycopg2
    username: postgres
    password: password
    ip: timescaledb
    port: 5432
    db_name: postgres
    table_name: main
    enabled: true
    table_schema: public
    data_agg: avg
  gym: null
interaction:
  name: dep_interaction
  obs_period: PT15M
  action_period: PT2H
  update_period: PT15M
  setpoint_ping_period: null
  state_age_tol: PT15M
  load_historical_data: true
  update_warmup: 0
  historical_batch_size: 10000
  hist_chunk_start: null
  checkpoint_path: outputs/checkpoints/main_coag
  restore_checkpoint: true
  warmup_period: null
  heartbeat:
    connection_id: null
    heartbeat_node_id: null
    heartbeat_period: PT5S
    max_counter: 1000
agent:
  name: greedy_ac
  n_updates: 1
  gamma: 0.9
  seed: 0
  critic:
    critic_network:
      name: ensemble
      ensemble: 1
      bootstrap_reduct:
        name: mean
      base:
        name: late_fusion
        input_scales:
        - 0.25
        - 0.75
        input_cfg:
          name: fc
          bias: true
          layer_init: orthogonal
          hidden:
          - 128
          activation:
          - name: relu
        skip_input: false
        combined_cfg:
          name: fc
          bias: true
          layer_init: orthogonal
          hidden:
          - 256
          activation:
          - name: relu
    critic_optimizer:
      name: lso
      lr: 0.1
      weight_decay: 0.0001
      max_backtracking_steps: 50
      unit_norm_direction: false
      fallback_step_size: 0.0001
      optim:
        name: adam
        lr: 0.001
        weight_decay: 0.0001
      init:
        name: To
      search_condition:
        name: Armijo
        kwargs:
          c: 0.1
          beta: 0.9
          min_step_size: 0.0
          max_step_size: 1.0
    buffer:
      name: mixed_history_buffer
      online_weight: 0.75
      ensemble: 1
      ensemble_probability: 1.0
      seed: 0
      memory: 1000000
      batch_size: 256
      n_most_recent: 1
      id: ''
    polyak: 0.995
  policy:
    name: network
    delta_actions: false
    delta_bounds: []
    action_bounds: true
    greedy: false
    delta_rejection_sample: true
    num_samples: 128
    actor_percentile: 0.1
    sampler_percentile: 0.2
    uniform_weight: 1.0
    init_sampler_with_actor_weights: true
    resample_for_sampler_update: true
    even_dispersed_uniform: false
    ingress_loss: true
    network:
      name: squashed_gaussian
      base:
        name: fc
        bias: true
        layer_init: orthogonal
        hidden:
        - 256
        - 256
        activation:
        - name: relu
        - name: relu
      head_layer_init: Xavier
      head_activation:
      - - name: identity
      - - name: clamp
          args:
          - -20
          - 2
        - name: exp
      head_bias: true
    optimizer:
      name: adam
      lr: 0.001
      weight_decay: 0.0001
    buffer:
      name: mixed_history_buffer
      online_weight: 0.75
      ensemble: 1
      ensemble_probability: 1.0
      seed: 0
      memory: 1000000
      batch_size: 256
      n_most_recent: 1
      id: ''
  n_actor_updates: 1
  n_critic_updates: 1
  eval_batch: false
  ingress_loss: true
eval_cfgs:
  monte_carlo:
    enabled: false
    precision: 0.99
    critic_samples: 5
    gamma: 0.9
  raw_data:
    data_modes:
    - 2
    stage_codes:
    - 1
    enabled: true
    tags: []
  policy_variance:
    enabled: true
    n_samples: 100
  q_online:
    enabled: true
  greed_dist_batch:
    enabled: true
    n_samples: 100
  greed_dist_online:
    enabled: true
    n_samples: 100
  greed_percent_batch:
    enabled: true
    n_samples: 200
    percentile: 0.1
  greed_percent_online:
    enabled: true
    n_samples: 200
    percentile: 0.1
  q_pdf_plots:
    enabled: true
    primary_action_samples: 100
    other_action_samples: 100
report:
  output_dir: outputs/report
  stages:
  - 1
  tags_to_exclude: []
  stat_table_enabled: true
  cross_corr_enabled: true
  cross_corr_tags: []
  cross_corr_max_lag: 100
  hist_enabled: true
  hist_show_mean: true
  hist_percentiles:
  - 0.1
  - 0.9
  hist_num_bins: 30
